<%= provide(:title, "Purchase Order" + @purchase_order.id.to_s) %>

<div class="card">
  <div class="card-header">
    Purchase Order <%= @purchase_order.id %>
  </div>
  <div class="card-body">
    <p class="card-text">
      <strong>Client number: </strong>
      <%= @purchase_order.client_number %>
    </p>
    
    <p class="card-text">
      <strong>Delivery address:</strong>
      <%= @purchase_order.delivery_address %>
    </p>
    
    <p class="card-text">
      <strong>Delivery city:</strong>
      <%= @purchase_order.delivery_city %>
    </p>
    
    <p class="card-text">
      <strong>Delivery country:</strong>
      <%= @purchase_order.delivery_country %>
    </p>
    
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th scope="col">Order Item Id</th>
          <th scope="col">Item title</th>
          <th scope="col">Item description</th>
          <th scope="col">Item price</th>
          <th scope="col">Item quantity</th>
          <th scope="col">Item total price</th>
          <!--<th scope="col">Item image url</th>-->
          <th scope="col">Delete</th>
        </tr>
      </thead>
    
      <tbody>
        <% @purchase_order.order_items.each do |order_item| %>
          <tr>
            <td><%= link_to ("Order Item " + order_item.id.to_s), purchase_order_order_item_path(@purchase_order, order_item) %></td>
            <td><%= order_item.item_title %></td>
            <td><%= order_item.item_description %></td>
            <td><%= order_item.item_price %></td>
            <td><%= order_item.item_quantity %></td>
            <td><%= order_item.item_quantity * order_item.item_price %></td>
            <!--<td><%#= order_item.item_image_url %></td>-->
            <td><%= link_to 'Delete', [@purchase_order, order_item], method: :delete, data: { confirm: 'Are you sure?' } %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
    
    <p class="d-flex justify-content-end mx-5 font-weight-bold">
      Delivery fee: <%= @purchase_order.delivery_fee %>
    </p>
    
    <p class="d-flex justify-content-end mx-5 font-weight-bold">
      Total: <%= @purchase_order.total %>
    </p>
    
    <div class="text-center py-3">
      <%= link_to 'Edit information', edit_purchase_order_path(@purchase_order), class:"btn btn-success mx-2"%>
      <%= link_to 'Add order item', new_purchase_order_order_item_path(@purchase_order), class:"btn btn-primary mx-2" %>
      <%= link_to 'Delete', @purchase_order, method: :delete, data: { confirm: 'Are you sure?' }, class:"btn btn-danger mx-2" %>
      <%= link_to 'Back to list', purchase_orders_path, class:"btn btn-link mx-2" %>
    </div>
  </div>
</div>